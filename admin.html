<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- LOGIN SCREEN -->
    <div id="login-screen" style="height:100vh; display:flex; align-items:center; justify-content:center; padding:20px;">
        <div class="card" style="width:100%; max-width:400px; text-align:center;">
            <h2><i class="fa-solid fa-lock"></i> Merchant Login</h2>
            <p style="color:#666; margin-bottom:20px;">Access your store dashboard</p>
            <input type="email" id="admin-email" placeholder="Email Address">
            <input type="password" id="admin-pass" placeholder="Password">
            <button onclick="adminLogin()" class="btn btn-primary" style="width:100%">Sign In / Register</button>
        </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard" class="container hidden" style="padding-top:30px;">
        
        <div class="admin-header">
            <div>
                <h2 style="margin:0;">Dashboard</h2>
                <small id="user-email-display" style="color:#666;">...</small>
            </div>
            <div class="flex" style="flex-wrap:wrap;">
                <a id="live-shop-btn" href="#" target="_blank" class="btn btn-outline"><i class="fa-solid fa-store"></i> Open Shop</a>
                <button onclick="logout()" class="btn btn-danger"><i class="fa-solid fa-power-off"></i></button>
            </div>
        </div>

        <!-- TABS -->
        <div class="admin-tabs">
            <button class="tab-btn active" onclick="switchTab('settings')">Settings</button>
            <button class="tab-btn" onclick="switchTab('products')">Products</button>
            <button class="tab-btn" onclick="switchTab('orders')">Orders</button>
        </div>

        <!-- SECTIONS -->
        <div id="settings" class="tab-content">
            <div class="card">
                <h3>Store Appearance</h3>
                <div class="grid" style="grid-template-columns: 1fr 1fr;">
                    <div>
                        <label>Business Name</label>
                        <input type="text" id="set-bizName">
                    </div>
                    <div>
                        <label>Brand Color</label>
                        <input type="color" id="set-color" style="height:45px; padding:2px;">
                    </div>
                </div>
                
                <label>Logo</label>
                <div class="flex">
                    <input type="file" id="set-logo-file">
                    <button onclick="uploadImage('set-logo-file', 'set-logo-url')" class="btn btn-outline">Upload</button>
                </div>
                <input type="hidden" id="set-logo-url">

                <label>WhatsApp Number (With Country Code, No +)</label>
                <input type="text" id="set-phone" placeholder="e.g. 94771234567">
                
                <label>Hero Welcome Text</label>
                <input type="text" id="set-hero">

                <button onclick="saveSettings()" class="btn btn-primary" style="margin-top:10px;">Save Changes</button>
            </div>
        </div>

        <div id="products" class="tab-content hidden">
            <div class="card" style="margin-bottom:20px; background:#f0f9ff; border-color:#bae6fd;">
                <h3><i class="fa-solid fa-plus-circle"></i> Add Product</h3>
                <div class="grid">
                    <input type="text" id="prod-title" placeholder="Product Name">
                    <input type="number" id="prod-price" placeholder="Price">
                </div>
                <div class="grid">
                    <input type="number" id="prod-stock" placeholder="Stock">
                    <input type="text" id="prod-cat" placeholder="Category">
                </div>
                <input type="text" id="prod-video" placeholder="YouTube Video URL">
                <textarea id="prod-desc" placeholder="Description" rows="2"></textarea>
                
                <label>Product Images</label>
                <div class="grid" style="grid-template-columns: 1fr 1fr 1fr;">
                    <input type="file" id="prod-img-1">
                    <input type="file" id="prod-img-2">
                    <input type="file" id="prod-img-3">
                </div>
                <button onclick="addProduct()" class="btn btn-primary" style="width:100%; margin-top:10px;">Create Product</button>
            </div>
            <div id="admin-product-list" class="grid"></div>
        </div>

        <div id="orders" class="tab-content hidden">
            <div id="order-list">Loading orders...</div>
        </div>

    </div>

    <div id="toast">Message</div>

    <script type="module" src="admin.js"></script>
    <script>
        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
