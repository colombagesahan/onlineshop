<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Store Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- LOGIN SCREEN (Keep existing) -->
    <div id="login-screen" style="height:100vh; display:flex; align-items:center; justify-content:center; background:#f0f2f5;">
        <div class="card" style="width:100%; max-width:400px; text-align:center;">
            <h2 style="color:var(--primary)"><i class="fa-solid fa-rocket"></i> Store Login</h2>
            <input type="email" id="admin-email" placeholder="Email Address">
            <input type="password" id="admin-pass" placeholder="Password">
            <button onclick="adminLogin()" class="btn btn-primary" style="width:100%">Access Dashboard</button>
        </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard" class="container hidden" style="padding-top:30px;">
        
        <div class="admin-header">
            <div>
                <h2>Dashboard</h2>
                <small id="user-email-display">...</small>
            </div>
            <div class="flex" style="gap:10px;">
                <a id="live-shop-btn" href="#" target="_blank" class="btn btn-outline"><i class="fa-solid fa-eye"></i> View Shop</a>
                <button onclick="logout()" class="btn btn-danger"><i class="fa-solid fa-power-off"></i></button>
            </div>
        </div>

        <div class="admin-tabs">
            <button class="tab-btn active" onclick="switchTab('settings')">Website Settings</button>
            <button class="tab-btn" onclick="switchTab('products')">Products</button>
            <button class="tab-btn" onclick="switchTab('orders')">Orders</button>
        </div>

        <!-- SETTINGS TAB (Expanded) -->
        <div id="settings" class="tab-content">
            <div class="grid" style="grid-template-columns: 1fr 1fr; gap:20px;">
                
                <!-- General Settings -->
                <div class="card">
                    <h3><i class="fa-solid fa-sliders"></i> General</h3>
                    <label>Business Name</label>
                    <input type="text" id="set-bizName">
                    <label>Brand Color</label>
                    <input type="color" id="set-color" style="height:50px; padding:5px;">
                    <label>WhatsApp Number (No +)</label>
                    <input type="text" id="set-phone" placeholder="9477.......">
                    <label>Logo</label>
                    <div style="display:flex; gap:5px;">
                        <input type="file" id="set-logo-file">
                        <button onclick="uploadImage('set-logo-file', 'set-logo-url')" class="btn btn-outline">Upload</button>
                    </div>
                    <input type="hidden" id="set-logo-url">
                </div>

                <!-- Home Page Content -->
                <div class="card">
                    <h3><i class="fa-solid fa-home"></i> Home Page</h3>
                    <label>Hero Title</label>
                    <input type="text" id="set-hero" placeholder="e.g. World Class Products">
                    <label>Hero Subtitle</label>
                    <input type="text" id="set-hero-sub" placeholder="e.g. Best quality in the market">
                    <label>Hero Background Image</label>
                    <div style="display:flex; gap:5px;">
                        <input type="file" id="set-hero-file">
                        <button onclick="uploadImage('set-hero-file', 'set-hero-url')" class="btn btn-outline">Upload</button>
                    </div>
                    <input type="hidden" id="set-hero-url">
                </div>
            </div>

            <!-- About & Contact Info -->
            <div class="card">
                <h3><i class="fa-solid fa-info-circle"></i> About & Contact</h3>
                <div class="grid" style="grid-template-columns: 1fr 1fr;">
                    <div>
                        <label>About Title</label>
                        <input type="text" id="set-about-title" placeholder="Who We Are">
                        <label>About Description</label>
                        <textarea id="set-about-desc" rows="4"></textarea>
                    </div>
                    <div>
                        <label>Shop Address</label>
                        <input type="text" id="set-address" placeholder="Physical Address">
                        <label>About Image</label>
                        <div style="display:flex; gap:5px;">
                            <input type="file" id="set-about-file">
                            <button onclick="uploadImage('set-about-file', 'set-about-url')" class="btn btn-outline">Upload</button>
                        </div>
                        <input type="hidden" id="set-about-url">
                    </div>
                </div>
                <button onclick="saveSettings()" class="btn btn-primary" style="margin-top:20px; width:100%;">Save All Changes</button>
            </div>
        </div>

        <!-- PRODUCTS TAB (Same logic, better style) -->
        <div id="products" class="tab-content hidden">
            <div class="card" style="border: 2px dashed #ddd; background: #fafafa;">
                <h3><i class="fa-solid fa-plus-circle"></i> Add New Product</h3>
                <div class="grid">
                    <input type="text" id="prod-title" placeholder="Product Name">
                    <input type="number" id="prod-price" placeholder="Price (LKR)">
                </div>
                <div class="grid">
                    <input type="text" id="prod-cat" placeholder="Category (e.g. Electronics)">
                    <input type="number" id="prod-stock" placeholder="Stock Qty">
                </div>
                <textarea id="prod-desc" placeholder="Product Description" rows="2"></textarea>
                <label>Images</label>
                <div class="grid" style="grid-template-columns: repeat(3, 1fr);">
                    <input type="file" id="prod-img-1">
                    <input type="file" id="prod-img-2">
                    <input type="file" id="prod-img-3">
                </div>
                <button onclick="addProduct()" class="btn btn-primary" style="width:100%;">Publish Product</button>
            </div>
            <div id="admin-product-list" class="grid"></div>
        </div>

        <!-- ORDERS TAB -->
        <div id="orders" class="tab-content hidden">
            <div id="order-list" class="grid"></div>
        </div>

    </div>
    <div id="toast">Message</div>
    <script type="module" src="admin.js"></script>
    <script>
        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
